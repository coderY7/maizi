{"version":3,"sources":["uni-app:///main.js","webpack:////Users/coderyh/Downloads/codeY/扫码点餐/pages/scan/scan.vue?8c86","webpack:////Users/coderyh/Downloads/codeY/扫码点餐/pages/scan/scan.vue?e65a","webpack:////Users/coderyh/Downloads/codeY/扫码点餐/pages/scan/scan.vue?cae1","webpack:////Users/coderyh/Downloads/codeY/扫码点餐/pages/scan/scan.vue?1934","uni-app:///pages/scan/scan.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA,wCAA8E;AAC9E;AACA,yF,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;;;AAGnD;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAk0B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACMt1B;AACA,MADA,kBACA;AACA;;;AAGA,GALA;AAMA,QANA,oBAMA;AACA;AACA;AACA,GATA;AAUA,QAVA,oBAUA;AACA;AACA,GAZA;AAaA;AACA,QADA,kBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDADA;AAEA,0BAFA;AAGA,oDAHA;AAIA,8CAJA;AAKA,sDALA;AAMA,gDANA;AAOA,4DAPA;AAQA,gBARA,CAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DADA;AAEA,iCAFA;AAGA,wDAHA;AAIA,kDAJA;AAKA,oDALA;AAMA,oBANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAHA;AAIA;AACA;AACA;AACA;AACA,uBAFA,EAEA,CAFA;AAGA;AACA,uDAbA,CAaA;;AAEA;AACA,mCADA;AAEA,+CAFA;AAGA,qCAHA;AAIA,iEAJA;AAKA,+CALA;AAMA,6CANA;AAOA,wDAPA;AAQA,wFARA;AASA,oFATA;AAUA,4CAVA;AAWA;AACA,+CADA;AAEA,6CAFA;AAGA,6CAHA;AAIA,0DAJA;AAKA,0FALA;AAMA,gEANA;AAOA,uCAPA;AAQA,yCARA,EAXA;;;AAsBA,mBArCA;AAsCA;AACA;AACA,iBArDA;AAsDA;AACA,aAvEA;AAwEA;AACA,qCADA;;;AAIA,WAvFA,MAuFA;AACA;AACA;;AAEA,SAhGA;;AAkGA,KAtGA,EAbA,E","file":"pages/scan/scan.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/scan/scan.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./scan.vue?vue&type=template&id=1db32b26&scoped=true&\"\nvar renderjs\nimport script from \"./scan.vue?vue&type=script&lang=js&\"\nexport * from \"./scan.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1db32b26\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/scan/scan.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./scan.vue?vue&type=template&id=1db32b26&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./scan.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./scan.vue?vue&type=script&lang=js&\"","<template>\n  <view>12\n  </view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t\n\t\t\t}\n\t\t},\n    onLoad() {\n      console.log('1212')\n      this.scan()\n    },\n    onShow(){\n      console.log('333')\n    },\n\t\tmethods: {\n\t\t\tscan(){\n        console.log('调用扫码')\n\t\t\t\t// 允许从相机和相册扫码\n\t\t\t\tuni.scanCode({\n\t\t\t\t\tsuccess: (res) =>{\n\t\t\t\t\t\tconsole.log('条码类型：' + res.scanType);\n\t\t\t\t\t\tconsole.log('条码内容：' + res.result);\n           let tableid=4;\n            if(tableid!=undefined){\n              uni.setStorageSync('syyid', '00268');\n              uni.setStorageSync('vipid', '26512220');\n              uni.setStorageSync('posid', '80800101');\n              uni.setStorageSync('tableid', '4');\n              uni.setStorageSync('tablenumber', '1')\n              uni.setStorageSync('fdbh', '808001');\n              uni.setStorageSync('companyid', '800008');\n              uni.setStorageSync('xsdbh', '');\n              uni.setStorageSync('token', 'XMUGTMwd6RihQZEWBAqvh8OSwLhT95wd');\n              //查询当前桌台订单信息\n              this.$u.api.orders({\n                access_token: uni.getStorageSync('token'),\n                vtype: 'new',\n                tableid: uni.getStorageSync('tableid'),\n                fdbh: uni.getStorageSync('fdbh'),\n                tablewaiter: uni.getStorageSync('syyid'),\n                posid: uni.getStorageSync('posid'),\n                tablenumber: uni.getStorageSync('tablenumber'),\n              }).then((res) => {\n                console.log('查询开台信息', res)\n                //查询桌台订单信息\n                if(res.error_code=='2'){\n                  console.log('已有订单')\n                  //已开台单号\n                  uni.setStorageSync('xsdbh', res.xsdbh)\n                  uni.setStorageSync('tablenumber', res.table_number)\n                  this.$u.api.orders({\n                    access_token: uni.getStorageSync('token'),\n                    vtype: 'detail',\n                    tableid: uni.getStorageSync('tableid'),\n                    fdbh: uni.getStorageSync('fdbh'),\n                    xsdbh: uni.getStorageSync('xsdbh')\n                  }).then(res => {\n                    let old = res;\n                    uni.setStorageSync('old', old)\n                    console.log('查询桌台订单明细：', res)\n                    let cartold = [];\n                    let countold=res.count;\n                    uni.setStorageSync('flownumold',countold)\n                    res.goodslist.forEach((item) => {\n                      let choosedText = [];\n                      let ext_zxprices = [];\n                      item.extlist.forEach(res => {\n                        choosedText.push(res.ext_name)\n                        ext_zxprices.push(Number.parseInt(res.ext_zxprice))\n                      })\n                      let text = choosedText.join(',')\n                      function sum(arr) {\n                        return arr.reduce((prev, curr)=>{\n                          return prev + curr;\n                        },0);\n                      }\n                      let addzxprice=sum(ext_zxprices) //属性总价\n\n                      cartold.push({\n                        id: item.spbm,\n                        cate_id: item.category_id,\n                        name: item.spmc,\n                        number: Number.parseInt(item.quantity) || 1,\n                        is_single: item.is_single,\n                        choosedText: text || '',\n                        price: Number.parseInt(item.price),\n                        zxprice: Number.parseInt(addzxprice) + Number.parseInt(item.price),\n                        image: `http://cateapi.mzsale.cn/${item.small_img_path}`,\n                        addzxprice:addzxprice,\n                        goodslist: {\n                          discount: item.discount,\n                          extlist: item.extlist,\n                          flownum: item.flownum,\n                          price: Number.parseInt(item.price),\n                          zxprice: Number.parseInt(addzxprice) + Number.parseInt(item.price),\n                          quantity: Number.parseInt(item.quantity),\n                          spbm: item.spbm,\n                          spsmm: item.spsmm,\n                        }\n                      })\n                    })\n                    console.log('旧数据信息', cartold)\n                    uni.setStorageSync('cartold', cartold)\n                  })\n                }\n              })\n              uni.switchTab({\n                url: '/pages/main/main'\n              });\n\n            }else {\n              console.log('请扫描桌台二维码')\n            }\n\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n"],"sourceRoot":""}